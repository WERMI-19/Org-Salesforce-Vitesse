<template>
    <!-- Carte principale affichant les produits liés à une opportunité -->
    <lightning-card title={label.Label_OpportunityProduits} icon-name="standard:opportunity">

        <!-- Affiche un message d'erreur si un problème de stock est détecté -->
        <template if:true={hasStockError}>
            <div class="custom-error-banner" role="alert">
                <lightning-formatted-rich-text value={label.Label_MessageStockError}></lightning-formatted-rich-text>
            </div>
        </template>

        <!-- Affiche le tableau des produits si des lignes d'opportunité existent -->
        <template if:true={hasLineItems}>
            <div class="slds-p-around_medium">
                <lightning-datatable
                    key-field="id"
                    data={lineItems}
                    columns={columns}
                    onrowaction={handleRowAction}
                    hide-checkbox-column>
                </lightning-datatable>
            </div>
        </template>

        <!-- Message alternatif si aucun produit n'est lié à l'opportunité -->
        <template if:false={hasLineItems}>
            <div class="slds-p-around-medium slds-text-color_weak">
                <lightning-formatted-rich-text value={label.Label_AucunProduit}></lightning-formatted-rich-text>
            </div>
        </template>

    </lightning-card>
</template>
