<template>
    <lightning-card title={Label_OpportunityProduits} icon-name="standard:opportunity">

        <!-- Message d'erreur si au moins une ligne pose un problème de stock -->
        <template if:true={hasStockError}>
            <div class="custom-error-banner" role="alert">
                <lightning-formatted-rich-text value={Label_MessageStockError}></lightning-formatted-rich-text>
            </div>
        </template>

        <!-- Tableau de lignes produits -->
        <template if:true={hasLineItems}>
            <div class="slds-p-around_medium">
                <lightning-datatable
                    key-field="id"
                    data={lineItems}
                    columns={columns}
                    onrowaction={handleRowAction}
                    hide-checkbox-column>
                </lightning-datatable>
            </div>
        </template>

        <!-- Message affiché si aucune ligne de produit -->
        <template if:false={hasLineItems}>
            <div class="slds-p-around-medium slds-text-color_weak">
                <lightning-formatted-rich-text value={Label_AucunProduit}></lightning-formatted-rich-text>
            </div>
        </template>

    </lightning-card>
</template>
